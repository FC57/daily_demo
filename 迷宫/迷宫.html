<!DOCTYPE html>
<html>

<head>
	<title>走迷宫游戏</title>
	<style>
		#board td {
			width: 15pt;
			height: 15pt;
			font-size: 2pt;
		}

		td.foot {
			font-size: 10pt;
		}

		#board td.start {
			font-size: 8pt;
			border-left: 2px black solid;
			background: yellow;
			border-top: 2px black solid;
			text-align: center;
			color: red
		}

		#board td.end {
			font-size: 8pt;
			text-align: center;
			color: green
		}

		#message {
			margin: 0px;
			padding: 0px;
			text-align: center
		}

		< !--
		/* A.cOn {
			text-decoration: none;
			font-weight: bolder
		} */

		#article {
			font: 12pt Verdana, arial, sans-serif;
			background: white;
			color: black;
			padding: 10px 15pt 0 5px
		}

		#article P.start {
			text-indent: 0px
		}

		#article P {
			margin-top: 0px;
			font-size: 10px;
			text-indent: 12px
		}

		#article #author {
			margin-bottom: 5px;
			text-indent: 0px;
			font-style: italic
		}

		#pageList P {
			padding-top: 10px
		}

		#article H3 {
			font-weight: bold
		}

		#article DL,
		UL,
		OL {
			font-size: 10px;
		}

		-->
	</style>

</head>

<body>
	<script>
		//数组元素用0和1表示是否加边框，0表示没有边框，1表示有边框
		var maze = new Array()
		var sides = new Array("Border-Top", "Border-Right")
		for (var rows = 0; rows < 13; rows++)

			maze[rows] = new Array()
		maze[0][0] = new Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
		maze[0][1] = new Array(0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1)
		maze[1][0] = new Array(1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1)
		maze[1][1] = new Array(0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1)
		maze[2][0] = new Array(1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1)
		maze[2][1] = new Array(0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1)
		maze[3][0] = new Array(0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1)
		maze[3][1] = new Array(1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1)
		maze[4][0] = new Array(0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1)
		maze[4][1] = new Array(1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1)
		maze[5][0] = new Array(0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 0)
		maze[5][1] = new Array(1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1)
		maze[6][0] = new Array(0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1)
		maze[6][1] = new Array(1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1)
		maze[7][0] = new Array(1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1)
		maze[7][1] = new Array(1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1)
		maze[8][0] = new Array(0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0)
		maze[8][1] = new Array(0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 0, 1)
		maze[9][0] = new Array(0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1)
		maze[9][1] = new Array(1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1)
		maze[10][0] = new Array(0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0)
		maze[10][1] = new Array(1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1)
		maze[11][0] = new Array(0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0)
		maze[11][1] = new Array(1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1)
		maze[12][0] = new Array(0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0)
		maze[12][1] = new Array(1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1)



		//走迷宫，移动
		function moveIt() {
			if (!progress)
				return;

			switch (event.keyCode) {
				case 37: // 向左移动
					//已经到最左边界，则不能移动
					if (maze[start.rows][1][start.cols - 1] == 0) {
						if (testNext(board.rows[start.rows].cells[start.cols - 1]))
							message.innerText = "往西走"
						start.cols--
						document.all.board.rows[start.rows].cells[start.cols].style.backgroundColor = "yellow"
					} else
						message.innerText = "不能再往西走了"
					break;

				case 38: // 向上
					if (maze[start.rows][0][start.cols] == 0) {
						if (testNext(board.rows[start.rows - 1].cells[start.cols]))
							message.innerText = "往北走"
						start.rows--
						document.all.board.rows[start.rows].cells[start.cols].style.backgroundColor = "yellow"
					} else
						message.innerText = "不能再往北走了"
					break;
				case 39: // 向右
					if (maze[start.rows][1][start.cols] == 0) {
						if (testNext(board.rows[start.rows].cells[start.cols + 1]))
							message.innerText = "往东走"
						start.cols++
						document.all.board.rows[start.rows].cells[start.cols].style.backgroundColor = "yellow"
					}
					else
						message.innerText = "不能再往东走了"
					break;
				case 40: //向下
					if (maze[start.rows + 1] == null) return
					if (maze[start.rows + 1][0][start.cols] == 0) {
						if (testNext(board.rows[start.rows + 1].cells[start.cols]))
							message.innerText = "往南走"
						start.rows++
						document.all.board.rows[start.rows].cells[start.cols].style.backgroundColor = "yellow"
					} else
						message.innerText = "不能再往南走了"
					break;
			}
			if (document.all.board.rows[start.rows].cells[start.cols].innerText == "end") {
				message.innerText = "恭喜你，胜利了!"//胜利，不能再走动了
				progress = false
			}
		}

		//判断是否后退，如果是后退，需要清楚当前单元格的样式
		function testNext(nxt) {
			//移动的目标单元格如果有央视yellow说明是后退
			if ((board.rows[start.rows].cells[start.cols].style.backgroundColor == "yellow") && (nxt.style.backgroundColor == 'yellow')) {
				message.innerText = "噢，我看你是你改变主意了！"
				board.rows[start.rows].cells[start.cols].style.backgroundColor = ""//吧当前单元格的样式去掉
				return false
			}
			return true
		}
	</script>
	<P align=center>请使用键盘上的→←↑↓键进行游戏</P><br>
	<p>
		<table id="board" align="center" cellspacing="0" cellpadding="0">
			<script>
				//遍历行
				for (var row = 0; row < maze.length; row++) {
					document.write("<tr>")
					//遍历列
					for (var col = 0; col < maze[row][0].length; col++) {
						document.write("<td style='")
						for (var cell = 0; cell < 2; cell++) {  //添加边框
							if (maze[row][cell][col] == 1)
								document.write(sides[cell] + ": 2px black solid;")
						}
						//非第一行的所以第一列，加左边框
						if ((0 == col) && (0 != row))
							document.write("border-left: 2px black solid;")
						//最后一行，加下边框
						if (row == maze.length - 1)
							document.write("border-bottom: 2px black solid;")
						//第1行第1列，即第一个单元格
						if ((0 == row) && (0 == col))
							document.write(" background-color:yellow;' class=start>start</td>")
						else
							if ((row == maze.length - 1) && (col == maze[row][0].length - 1))
								document.write("' class=end>end</td>")
							else
								document.write("'> </td>")
					}
					document.write("</tr>")
				}

				var start = new Object;//迷宫对象
				start.rows = 0;//行
				start.cols = 0;//列
				progress = true;//true完成，不可以在走动，false未完成可以继续走动
				document.onkeydown = moveIt;

			</script>
		</table>
		<p id="message"> </p>
		<br />
</body>

</html>